<body>
    <div class="container my-container" style="max-width: 90%;">
        <div class="row row-border heading">
            All Tests
        </div>

        <div class="row row-border test">
            
            <div id="recent-test" class="col col-border">
                    {{!-- ADD data.objevt.array in each --}}
                {{#each data.tests}}

                <div class="row row-border  row-test justify-content-between text-center  ">
                    <div class="col-2 col-border">
                      <a href="/viewtest/{{this._id}}">{{this.name}}</a>  
                    </div>
                    <div class="col-2 col-border">
                        <a href="/invite/{{this._id}}">
                            Invite
                        </a>
                    </div>

                    <div class="col-2 col-border">
                        <a href="/edittest/{{this._id}}">
                            Edit
                        </a>
                    </div>

                    <div class="col-2 col-border">
                        <a href="#" id="{{this._id}}" onclick="deleteTest(this)">
                            Delete
                        </a>
                    </div>

                    <div class="col-2 col-border">
                        <a href="/viewresults/{{this.name}}/{{this._id}}">
                            View Result
                        </a>
                    </div>
        </div>
          {{/each}}


            </div>
        </div>
         <div class="row " style="height:10px;"></div>
    </div>

    <script>
        function deleteTest(element) {
            var xmlHttpRequest = new XMLHttpRequest()
            xmlHttpRequest.open("DELETE", `company/test/${element.id}`, true)
            xmlHttpRequest.setRequestHeader("Content-Type", "application/json")
            xmlHttpRequest.setRequestHeader("authorization", getCookie("authorization"));
            xmlHttpRequest.onreadystatechange = function () {
                if (this.readyState === 4) {
                    if (this.status === 200) {
                        location.reload()
                    }
                    else {
                        console.log('error')
                        //document.getElementById("error").innerText = JSON.parse(this.responseText).message
                    }
                }
            }
            xmlHttpRequest.send()
        }

    </script>


</body>